<!DOCTYPE html>
<html lang="en">
<%- include('../layouts/adminHeader'); %>

    <body>


        <header class="header">

            <div class="flex">

                <a href="#home" class="logo"><img src="./css/img/logo.png" alt=""></a>

                <!-- Inspiration from Skaikh Anas start -->
                <nav class="navbar">
                    <a href="/home">HOME</a>
                    <a href="/protocols">PROTOCOLS</a>
                    <a href="/weather">WEATHER</a>
                    <a href="/login/postings">BLOG</a>
                    <a href="/admin/pages">PAGES</a>
                    <a href="/admin/categories">CATEGORIES</a>
                    <a href="/profile">PROFILE</a>
                    <a href="/" target="blank" class="navbar-brand">Shopping Cart</a>
                    <a id="logout" href="/logout">LOGOUT</a>
                </nav>
                <!-- Inspiration from Skaikh Anas end -->


                <div class="dropdown" style="float:right;">
                    <button class="dropbtn">MENU</button>
                    <div class="dropdown-content">
                        <a href="/home">HOME</a>
                        <a href="/protocols">PROTOCOLS</a>
                        <a href="weather/">WEATHER</a>
                        <a href="/login/postings">BLOG</a>
                        <a href="/admin/pages">PAGES</a>
                        <a href="/admin/categories">CATEGORIES</a>
                        <a href="profile/">PROFILE</a>
                        <a href="/" target="blank" class="navbar-brand">Shopping Cart</a>
                        <a id="logout" href="/logout">LOGOUT</a>
                        <!--Bo -->
                    </div>
                </div>
            </div>
        </header>
        <br>

        <h2 class="pageTitle">Products</h2>
        <a href="/admin/products/addProduct" class="btn btn-primary">Add a new product </a>
        <br><br>

        <!-- display table if count if one or more product... -->
        <% if (count > 0) { %>

            <table class="p-3 table table-striped">
                <thead>
                    <tr class="home">
                        <th>Product</th>
                        <th>Price</th>
                        <th>Category</th>
                        <th>Product Image</th>
                        <th>Edit</th>
                        <th>Delete</th>
                    </tr>
                </thead>

                <tbody>
                    <% products.forEach(function(product) { %>
                        <tr>
                            <td>
                                <%= product.title %>
                            </td>
                            <td>
                                <!-- round to two decimal places -->
                                $<%= parseFloat(product.price).toFixed(2) %>
                            </td>
                            <td>
                                <%= product.category %>
                            </td>
                            <td>
                                <% if (product.image == "") { %>
                                    <img src="/images/noImage.png" alt="defaultImage">
                                    <% } else {%>
                                        <img src="/productImages/<%= product._id %>/<%= product.image %>"
                                            alt="productImage">
                                        <% } %>
                            </td>
                            <td>
                                <a href="/admin/products/editProduct/<%= product._id %>">Edit</a>
                            </td>

                            <td>
                                <a class="confirmDeletion"
                                    href="/admin/products/deleteProduct/<%= product._id %>">Delete</a>
                            </td>
                        </tr>
                        <% }); %>
                </tbody>
            </table>

            <% } else {%>
                <h3 class="text-center">Out of stock.</h3>
                <% } %>

                    <%- include('../layouts/adminFooter'); %>
    </body>

</html>